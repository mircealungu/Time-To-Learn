define("time",[],function(){function e(){var e;try{e=tizen.time.getCurrentDateTime()}catch(t){console.error("Error: ",t.message)}return e}function t(e){return 10>e&&(e="0"+e),e}var n,o,r,i,l,a,c,s=307,d=1323,u=0,g=5;return{create:function(){n=e(),o=n.getFullYear(),r=t(n.getDate()),i=t(n.getMonth()+1),l=t(n.getHours()),a=t(n.getMinutes()),c=t(n.getSeconds()),u++},getTimestamp:function(){return o+"-"+i+"-"+r+"T"+l+":"+a+":"+c},getDay:function(){return r},getHours:function(){return l},getMinutes:function(){return a},getTimer:function(){return u},getSunrise:function(){return s},getSunset:function(){return d},resetTimer:function(){u=0},setTest:function(){g=0}}}),define("events",["time"],function(e){var t="https://zeeguu.unibe.ch/upload_smartwatch_events",n=60,o=[],r=0;return{add:function(t,n){e.create(),o[r++]={bookmark_id:n,time:e.getTimestamp(),event:t}},save:function(){if(null!==localStorage.getItem("events")){var e=JSON.parse(localStorage.getItem("events"));console.log("currently in local storage: "+JSON.stringify(e)),console.log("saving..."),localStorage.setItem("events",JSON.stringify(e.concat(o)));var t=JSON.parse(localStorage.getItem("events"));console.log("events saved: "+JSON.stringify(t))}else console.log("currently no events in storage"),console.log("saving..."),localStorage.setItem("events",JSON.stringify(o)),console.log("events saved: "+JSON.stringify(o))},send:function(e){var n=new FormData,o=JSON.parse(localStorage.getItem("events"));console.log("events that will be send:"+JSON.stringify(o)),n.append("events",JSON.stringify(o));var r=new XMLHttpRequest;r.open("POST",t+"?session="+e,!0),r.onload=function(){console.log("events uploaded to db: "+this.responseText),"OK"===this.responseText&&(console.log("removing events localStorage.."),localStorage.removeItem("events"),console.log("events in storage: "+localStorage.getItem("events")))},r.send(n)},print:function(){console.log(JSON.stringify(o))},readyToSend:function(){return console.log("timer: "+e.getTimer()),e.getTimer()>n?(e.resetTimer(),!0):!1},clear:function(){o=[],r=0}}}),define("userData",["events"],function(e){var t,n=5,o=[],r=[0,1,2,3,4],i=5,l=0,a=0,c=!1;return{setWordPair:function(e,t,n,r){o[e]={word:t,translation:n,id:r}},getWordPair:function(e){return o[e]},areThereWords:function(){return o.isEmpty()?!0:!1},flashCardMethod:function(e){e?(r[l]=n,l++,this.nextWord()):l++,l===i&&(l=0)},getWord:function(){return c?o[r[l]].translation:o[r[l]].word},removeWord:function(){t>5?(o.splice(r[l],1),t--):console.log("Need at least 5 words for the algorithm")},getTranslation:function(){return c?o[r[l]].word:o[r[l]].translation},load:function(){0===localStorage.length?console.log("No user data available."):(a=localStorage.getItem("accountCode"),console.log("loaded accountCode: "+a),e=JSON.parse(localStorage.getItem("events")),null===e&&(e=[]),console.log("loaded events: "+JSON.stringify(e)),null!==localStorage.getItem("wordNumber")&&(n=localStorage.getItem("wordNumber"),console.log("loaded wordNumber: "+n)),null!==localStorage.getItem("index")&&(l=localStorage.getItem("index"),console.log("loaded index: "+l)),null!==localStorage.getItem("flashcardsToShow")&&(r=localStorage.getItem("flashcardsToShow"),console.log("loaded flashcards: "+r)))},saveCode:function(e){a=e,localStorage.setItem("accountCode",a),console.log("accountCode saved: "+localStorage.getItem("accountCode"))},saveWordPair:function(){localStorage.setItem("wordPair",JSON.stringify(o)),console.log(localStorage.getItem("wordPair"))},saveEvents:function(){e.print(),e.save(),e.clear()},saveCurrentState:function(){localStorage.setItem("wordNumber",n),localStorage.setItem("index",l),localStorage.setItem("flashcardsToShow",r)},sendEvents:function(){try{e.send(a)}catch(t){console.log("Error during sending: "+t)}},save:function(){if("localStorage"in window){if(localStorage.setItem("accountCode",a),console.log("accountCode saved: "+a),localStorage.setItem("wordNumber",n),console.log("wordNumber saved: "+n),e.print(),e.save(),e.clear(),e.readyToSend()){console.log("ready to send...");try{e.send(a)}catch(t){console.log("Error during sending: "+t)}}}else console.log("no localStorage in window")},addEvent:function(t){console.log("wordNumber is "+r[l]),e.add(t,o[r[l]].id)},getCode:function(){return a},setCode:function(e){a=e},getNumberOfWords:function(){return t},setNumberOfWords:function(e){console.log("numberOfWords :"+e),t=e},printWords:function(){console.log(JSON.stringify(o))},getWordNumber:function(){return n},setWordNumber:function(e){n=e},nextWord:function(){n++,n===t&&(n=0)},getReverseStatus:function(){return c},setReverseStatus:function(e){c=e},printEvents:function(){e.print()},clear:function(){localStorage.clear()}}}),define("login",["userData"],function(e){function t(){var e,t;e=document.getElementById("loginPage"),t=document.getElementById("mainPage"),e.style.display="none",t.style.display="block"}function n(e,t){s=document.getElementById("digitSpace"),d=s.getContext("2d"),d.clearRect(x+w*(e-1),0,w,B),d.font="80px Arial",d.fillStyle="black",d.textAlign="center",d.fillText(t,T+w*(e-1),b)}function o(e,t,o){return t?(o++,o>9&&(o=0)):(o--,0>o&&(o=9)),n(e,o),o}function r(e){s=document.getElementById("loginPopup"),s.style.visibility="visible",s=document.getElementById("loginPopupSpace"),d=s.getContext("2d"),d.clearRect(0,0,y,S),d.font="30px Arial",d.fillStyle="white",d.textAlign="center","NO_CONNECTION"===e?(d.fillText("NO CONNECTION",E,N),d.fillText("There isn't a connection",E,C),d.fillText("with the internet at the moment",E,O),d.fillText("please check",E,k),d.fillText("your internet connection",E,P)):"WRONG_SESSION_NUMBER"===e?(d.fillText("WRONG PASSWORD",E,N),d.fillText("this password is not",E,C),d.fillText("recognized in our database",E,O),d.fillText("please check your account",E,k),d.fillText("at Zeeguu",E,P)):(d.fillText("TOO FEW WORDS",E,N),d.fillText("more words needed",E,C),d.fillText("please make sure you have",E,O),d.fillText("at least 5 words",E,k)),d.font="15px Arial",d.fillStyle="white",d.textAlign="center",d.fillText("please press the screen to try again",E,L),c(1),document.getElementById("loginPopup").addEventListener("click",function(){var e=document.getElementById("loginPopup");e.style.visibility="hidden"})}function i(){s=document.getElementById("log_headerSpace"),d=s.getContext("2d"),d.clearRect(0,0,y,p),d.font="15px Arial",d.fillStyle="white",d.textAlign="center",d.fillText("Please fill in your 8 digit code",E,h)}function l(e){s=document.getElementById("pageIconSpace"),d=s.getContext("2d"),d.clearRect(0,0,y,I),1===e?(d.beginPath(),d.arc(170,7,7,0,2*Math.PI),d.fillStyle="#FFFFFF",d.fill(),d.beginPath(),d.arc(190,7,7,0,2*Math.PI),d.fillStyle="#C3C3C3",d.fill()):(d.beginPath(),d.arc(170,7,7,0,2*Math.PI),d.fillStyle="#C3C3C3",d.fill(),d.beginPath(),d.arc(190,7,7,0,2*Math.PI),d.fillStyle="#FFFFFF",d.fill())}function a(e){i(),l(e),n(1,0),n(2,0),n(3,0),n(4,0)}function c(e){u=0,g=0,f=0,m=0,1===e&&(v=0),a(e)}var s,d,u=0,g=0,f=0,m=0,v=0,y=360,S=360,E=180,p=70,h=62,I=15,w=76,B=105,x=40,T=65,b=80,N=120,C=155,O=185,k=215,P=245,L=280;return function(n){null!==localStorage.getItem("accountCode")?(e.load(),t(),n(e.getCode())):(s=document.getElementById("digitSpace"),d=s.getContext("2d"),a(1),document.getElementById("first_plus").addEventListener("click",function(){u=o(1,!0,u)}),document.getElementById("first_min").addEventListener("click",function(){u=o(1,!1,u)}),document.getElementById("second_plus").addEventListener("click",function(){g=o(2,!0,g)}),document.getElementById("second_min").addEventListener("click",function(){g=o(2,!1,g)}),document.getElementById("third_plus").addEventListener("click",function(){f=o(3,!0,f)}),document.getElementById("third_min").addEventListener("click",function(){f=o(3,!1,f)}),document.getElementById("fourth_plus").addEventListener("click",function(){m=o(4,!0,m)}),document.getElementById("fourth_min").addEventListener("click",function(){m=o(4,!1,m)}),document.getElementById("setNextButton").addEventListener("click",function(){if(0===v)v=u.toString()+g.toString()+f.toString()+m.toString(),c(2);else{v=v+u.toString()+g.toString()+f.toString()+m.toString();var o=n(v);"SUCCESS"===o?(e.saveCode(v),t()):r(o)}}))}}),define("session",["userData","login"],function(e,t){function n(t){var n;console.log("Trying to get words with session: "+t);try{var u=new XMLHttpRequest;u.open("GET",s+d+i+"?session="+t,!1),u.onload=function(){try{var t=JSON.parse(this.responseText),i=0;if(Object.keys(t).length<5)r="TOO_FEW_WORDS";else{for(n=0;n<Object.keys(t).length;n++)o.font=a,o.measureText(String(t[n].from)).width<=l-20&&(o.font=c,o.measureText(String(t[n].to)).width<=l-80&&(e.setWordPair(i,t[n].from,t[n].to,t[n].id),i++));e.setNumberOfWords(i),e.saveWordPair(),r="SUCCESS"}}catch(s){console.log("wrong session number: "+s),r="WRONG_SESSION_NUMBER"}},u.send()}catch(g){console.log("no internet connection: "+g),r="NO_CONNECTION"}}var o,r,i=50,l=360,a="45px Arial",c="35px Arial",s="https://zeeguu.unibe.ch/",d="bookmarks_to_study/";return{create:function(e,t){o=e,n(t)},printWords:function(){e.printWords()},getStatus:function(){return r}}}),define("battery",[],function(){function e(e,t,n,o){var r=(o-90)*Math.PI/180;return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}function t(t,n,o,r,i){var l=e(t,n,o,i),a=e(t,n,o,r),c=180>=i-r?"0":"1",s=["M",l.x,l.y,"A",o,o,0,c,0,a.x,a.y].join(" ");return s}var n="green",o="red";return{draw:function(){var e=navigator.battery||navigator.webkitBattery||navigator.mozBattery;e.onchargingchange=function(){e.charging?console.log("battery is charging"):console.log("battery is not charging")},e.onlevelchange=function(){console.log(Math.floor(100*e.level)),document.getElementById("battery").setAttribute("d",t(180,180,180,270,270+180*e.level)),e.level>.15?document.getElementById("battery").setAttribute("stroke",n):document.getElementById("battery").setAttribute("stroke",o)}}}}),define("weather",[],function(){function e(e,t){console.log(e),console.log(t);var n=new XMLHttpRequest;n.open("GET","http://api.openweathermap.org/data/2.5/weather?lat="+e+"&lon="+t+"&APPID="+r,!1),n.onload=function(){console.log("getting weather data.."),console.log(this.responseText),o=JSON.parse(this.responseText),console.log("sunset: "+o.sys.sunset),console.log(JSON.stringify(o))},n.send()}function t(){var t=new XMLHttpRequest;t.open("GET","http://ip-api.com/json",!1),t.onload=function(){console.log("getting location.."),console.log(this.responseText);var t=JSON.parse(this.responseText);e(t.lat,t.lon),console.log(JSON.stringify(t))},t.send()}function n(e){var t=new Date(1e3*e);return 60*t.getUTCHours()+t.getUTCMinutes()-t.getTimezoneOffset()}var o,r="ab2771b4d49ab0798786dd6f2bee71a0",i=!1;return{refresh:function(){i=!0,t()},getSunset:function(){return n(o.sys.sunset)},getSunrise:function(){return n(o.sys.sunrise)},getImageSource:function(){return"http://openweathermap.org/img/w/"+o.weather[0].icon+".png"},getTemperature:function(){return(o.main.temp-273.15).toFixed(0)},setIsRefreshed:function(e){i=e},getIsRefreshed:function(){return i}}}),define("gui",["battery","userData","time","weather"],function(e,t,n,o){function r(e){x=o.getSunrise(),T=o.getSunset(),e>=x&&T>=e?(b=(180/(T-x)).toFixed(2),b=90+(e-x)*b,N="rotate("+b+"deg)",document.getElementById("timeBackground").style.transform=N):(b=(180/(x+(1440-T))).toFixed(2),b=e>T?270+(e-T)*b:270+(e+(1440-T))*b,N="rotate("+b+"deg)",document.getElementById("timeBackground").style.transform=N)}function i(){w.clearRect(0,0,100,90),w.font="30px Arial",w.fillStyle=W,w.textAlign=L,w.fillText(n.getDay(),72,63)}function l(e,t,n,o){I.font=o+C,I.fillStyle=W,I.textAlign=L,I.fillText(e,t,n)}function a(){B.clearRect(0,0,R,M),B.font=O+C,B.fillStyle=W,B.textAlign=L,B.fillText(n.getHours()+":"+n.getMinutes(),R/2,A)}function c(e,t){var n=.1;e.style.display="block";var o=setInterval(function(){n>=.8&&clearInterval(o),e.style.opacity=n,e.style.filter="alpha(opacity="+100*n+")",n+=.1*n},t)}function s(e,t){var n=.8,o=setInterval(function(){.1>=n&&(clearInterval(o),e.style.visibility="hidden"),e.style.opacity=n,e.style.filter="alpha(opacity="+100*n+")",n-=.1*n},t)}function d(e){var t=document.getElementById("imageFade");t.style.visibility="visible",t.style.opacity=1;var n=t.getContext("2d"),o=new Image;o.onload=function(){n.drawImage(o,0,0,R,_)},o.src=e,setTimeout(function(){s(t,z)},H)}function u(){document.getElementById("wordSpace").style.backgroundImage="url('assets/background.png')",I.clearRect(0,0,R,F),l(t.getWord(),R/2,J,k);var e=document.getElementById("revealedPage");e.style.visibility="hidden"}function g(){I.clearRect(0,0,R,F),l(t.getWord(),R/2,J,k),l(t.getTranslation(),R/2,D,P),document.getElementById("wordSpace").style.backgroundImage="url('assets/revealed_clicked_background.png')";var e=document.getElementById("revealedPage");e.style.visibility="visible"}function f(){var e=document.getElementById("settingsPage");e.style.visibility="visible",c(e,5)}function m(){var e=document.getElementById("menuPage");e.style.visibility="visible",c(e,5)}function v(e){null===U?U=setTimeout(function(){U=null,e()},300):(clearTimeout(U),U=null,f())}function y(){o.setIsRefreshed(!1);var e=document.getElementById("weatherSpace"),t=e.getContext("2d"),n=new Image;n.onload=function(){t.drawImage(n,0,0)},n.src=o.getImageSource()}function S(){var e=document.getElementById("temperatureSpace"),t=e.getContext("2d");t.clearRect(0,0,50,50),t.font="15px Arial",t.fillStyle=W,t.textAlign=L,t.fillText(o.getTemperature()+"°C",25,25)}function E(){t.addEvent("right"),t.saveCurrentState(),t.saveEvents(),t.sendEvents();var e="assets/right_icon.png";t.flashCardMethod(!0),d(e),u()}function p(){t.addEvent("wrong"),t.saveCurrentState(),t.saveEvents(),t.sendEvents();var e="assets/wrong_icon.png";t.flashCardMethod(!1),d(e),u()}function h(e){d(e),t.removeWord(),t.saveCurrentState(),t.saveEvents(),t.saveWordPair(),t.sendEvents(),u()}var I,w,B,x,T,b,N,C="px Arial",O=120,k=45,P=35,L="center",W="white",R=360,_=120,M=180,A=160,F=120,J=45,D=95,z=20,H=100,U=null;return{draw:function(){n.create();var t=60*n.getHours()+1*n.getMinutes();a(),i(),r(t),e.draw(),o.getIsRefreshed()&&y(),S()},create:function(e){I=e;var n=document.getElementById("digitalTime");B=n.getContext("2d");var r=document.getElementById("iconSpace");w=r.getContext("2d"),o.refresh(!0),u(),document.getElementById("wordSpace").addEventListener("click",function(){t.addEvent("reveal"),v(g),t.saveEvents()}),document.getElementById("revealButton").addEventListener("click",function(){t.addEvent("reveal"),g(),t.saveEvents()}),document.getElementById("wrongSpace").addEventListener("click",function(){p()}),document.getElementById("wrongButton").addEventListener("click",function(){p()}),document.getElementById("menuSpace").addEventListener("click",function(){v(m)}),document.getElementById("menuButton").addEventListener("click",function(){m()}),document.getElementById("rightSpace").addEventListener("click",function(){E()}),document.getElementById("rightButton").addEventListener("click",function(){E()}),document.getElementById("menuLargeSpace").addEventListener("click",function(){var e=document.getElementById("menuPage");s(e,5)}),document.getElementById("wrongTranslationButton").addEventListener("click",function(){t.addEvent("wrongTranslation"),h("assets/trash_icon.png")}),document.getElementById("learnedButton").addEventListener("click",function(){t.addEvent("learnedIt"),h("assets/right_icon.png")}),document.getElementById("backButtonInMenu").addEventListener("click",function(){var e=document.getElementById("menuPage");s(e,5)}),document.getElementById("settingsSpace").addEventListener("click",function(){var e=document.getElementById("settingsPage");s(e,5)}),document.getElementById("reverseButton").addEventListener("click",function(){t.addEvent("reverse"),t.setReverseStatus(!t.getReverseStatus()),u()}),document.getElementById("logOutButton").addEventListener("click",function(){t.clear(),document.location.reload(!0)}),document.getElementById("backButtonInSettings").addEventListener("click",function(){var e=document.getElementById("settingsPage");s(e,5)})}}}),define("device",["userData","weather"],function(e,t){function n(){try{tizen.power.setScreenStateChangeListener(function(n,o){"SCREEN_NORMAL"===o&&"SCREEN_OFF"===n?(console.log("We just woke up"),e.addEvent("screenOn"),t.refresh(!0)):(console.log("The display has been switched off"),e.addEvent("screenOff")),e.saveEvents()})}catch(n){}}function o(){document.addEventListener("tizenhwkey",function(e){if("back"===e.keyName)try{tizen.application.getCurrentApplication().exit()}catch(t){}})}return{create:function(){o()},listen:function(){n()}}}),require(["login","session","gui","device"],function(e,t,n,o){function r(){n.draw(),o.listen(),setTimeout(r,1e3)}function i(e){t.create(a,e),t.printWords();var i=t.getStatus();return"SUCCESS"!==i?i:(n.create(a),o.create(),r(),i)}var l=document.getElementById("wordSpace"),a=l.getContext("2d");new e(i)}),define("main",function(){});