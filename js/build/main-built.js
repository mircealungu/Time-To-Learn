define("time",[],function(){function e(){var e;try{e=tizen.time.getCurrentDateTime()}catch(t){console.error("Error: ",t.message)}return e}function t(e){return 10>e&&(e="0"+e),e}var n,o,r,i,c,l,a,s=0;return{create:function(){n=e(),o=n.getFullYear(),r=t(n.getDate()),i=t(n.getMonth()+1),c=t(n.getHours()),l=t(n.getMinutes()),a=t(n.getSeconds()),s++},getTimestamp:function(){return o+"-"+i+"-"+r+"T"+c+":"+l+":"+a},getDay:function(){return r},getHours:function(){return c},getMinutes:function(){return l},getTimer:function(){return s},resetTimer:function(){s=0}}}),define("events",["time"],function(e){function t(){r=[],i=0}var n="https://zeeguu.unibe.ch/upload_smartwatch_events",o=600,r=[],i=0;return{add:function(t,n){e.create(),r[i++]={bookmark_id:n,time:e.getTimestamp(),event:t}},save:function(){if(null!==localStorage.getItem("events")){var e=JSON.parse(localStorage.getItem("events"));console.log("currently in local storage: "+JSON.stringify(e)),console.log("saving..."),localStorage.setItem("events",JSON.stringify(e.concat(r)));var n=JSON.parse(localStorage.getItem("events"));console.log("events saved: "+JSON.stringify(n))}else console.log("currently no events in storage"),console.log("saving..."),localStorage.setItem("events",JSON.stringify(r)),console.log("events saved: "+JSON.stringify(r));t()},load:function(e){e=JSON.parse(e),i=e.length-1,console.log(i+1+" events loaded: "+JSON.stringify(e))},send:function(e){console.log("In send function, sessionNumber == "+e);var t=new FormData;t.append("events",JSON.stringify(r));var o=new XMLHttpRequest;o.open("POST",n+"?session="+e,!1),o.onload=function(){console.log(this.responseText),"OK"===this.responseText?console.log("events are succesfully send!"):console.log("events are not send.")},o.send(t)},print:function(){console.log(JSON.stringify(r))},readyToSend:function(){return console.log("timer: "+e.getTimer()),e.getTimer()>o?(e.resetTimer(),!0):!1},getAll:function(){return r}}}),define("userData",["events"],function(e){var t=0,n=[],o=50,r=0,i=!1;return{setWordPair:function(e,t,o,r){n[e]={word:t,translation:o,id:r}},getWordPair:function(e){return n[e]},areThereWords:function(){return n.isEmpty()?!0:!1},deleteWordPair:function(){n.splice(t,1),o--,0===o&&console.log("No words left!")},getWord:function(e){return i?n[e].translation:n[e].word},getTranslation:function(e){return i?n[e].word:n[e].translation},load:function(){if(0===localStorage.length)console.log("No user data available.");else for(var e=0;e<localStorage.length;e++)console.log("key: "+localStorage.key(e)+" item: "+localStorage.getItem(localStorage.key(e))),"accountCode"===localStorage.key(e)?(r=localStorage.getItem(localStorage.key(e)),console.log("accountCode loaded: "+r)):"wordNumber"===localStorage.key(e)&&(t=localStorage.getItem(localStorage.key(e)),console.log("wordNumber loaded: "+t))},save:function(){if("localStorage"in window)if(localStorage.setItem("accountCode",r),console.log("accountCode saved: "+r),localStorage.setItem("wordNumber",t),console.log("wordNumber saved: "+t),e.readyToSend()){console.log("ready to send...");try{e.send(r),e.clear()}catch(n){console.log("No internet connection to send event data.")}}else e.save();else console.log("no localStorage in window")},addEvent:function(o){e.add(o,n[t].id)},getCode:function(){return r},setCode:function(e){r=e},getNumberOfWords:function(){return o},printWords:function(){console.log(JSON.stringify(n))},getWordNumber:function(){return t},setWordNumber:function(e){t=e},nextWord:function(){t++},getReverseStatus:function(){return i},setReverseStatus:function(e){i=e},printEvents:function(){e.print()}}}),define("login",["userData"],function(e){function t(){return e.load(),console.log("local logincode: "+e.getCode()),e.getCode()}function n(){var e,t;e=document.getElementById("loginPage"),t=document.getElementById("mainPage"),e.style.display="none",t.style.display="block"}function o(e,t){s=document.getElementById("digitSpace"),d=s.getContext("2d"),d.clearRect(40+75*(e-1),0,75,105),d.font="80px Arial",d.fillStyle="black",d.textAlign="center",d.fillText(t,65+75*(e-1),80)}function r(e,t,n){return t?(n++,n>9&&(n=0)):(n--,0>n&&(n=9)),o(e,n),n}function i(){s=document.getElementById("log_headerSpace"),d=s.getContext("2d"),d.clearRect(0,0,360,70),d.font="30px Arial",d.fillStyle="white",d.textAlign="center",d.fillText("Time to Learn",180,43),d.font="15px Arial",d.fillStyle="white",d.textAlign="center",d.fillText("Please fill in your 8 digit code",180,62)}function c(e){s=document.getElementById("pageIconSpace"),d=s.getContext("2d"),d.clearRect(0,0,360,15),1===e?(d.beginPath(),d.arc(170,7,7,0,2*Math.PI),d.fillStyle="#FFFFFF",d.fill(),d.beginPath(),d.arc(190,7,7,0,2*Math.PI),d.fillStyle="#C3C3C3",d.fill()):(d.beginPath(),d.arc(170,7,7,0,2*Math.PI),d.fillStyle="#C3C3C3",d.fill(),d.beginPath(),d.arc(190,7,7,0,2*Math.PI),d.fillStyle="#FFFFFF",d.fill())}function l(e){i(),c(e),o(1,0),o(2,0),o(3,0),o(4,0)}function a(e){u=0,g=0,f=0,m=0,1===e&&(v=0),l(e)}var s,d,u=0,g=0,f=0,m=0,v=0;return function(o){0!==t()?(n(),o()):(s=document.getElementById("digitSpace"),d=s.getContext("2d"),l(1),document.getElementById("first_plus").addEventListener("click",function(){u=r(1,!0,u)}),document.getElementById("first_min").addEventListener("click",function(){u=r(1,!1,u)}),document.getElementById("second_plus").addEventListener("click",function(){g=r(2,!0,g)}),document.getElementById("second_min").addEventListener("click",function(){g=r(2,!1,g)}),document.getElementById("third_plus").addEventListener("click",function(){f=r(3,!0,f)}),document.getElementById("third_min").addEventListener("click",function(){f=r(3,!1,f)}),document.getElementById("fourth_plus").addEventListener("click",function(){m=r(4,!0,m)}),document.getElementById("fourth_min").addEventListener("click",function(){m=r(4,!1,m)}),document.getElementById("setNextButton").addEventListener("click",function(){0===v?(v=u.toString()+g.toString()+f.toString()+m.toString(),a(2)):(v=v+u.toString()+g.toString()+f.toString()+m.toString(),e.setCode(parseInt(v,10)),n(),o())}))}}),define("session",["userData"],function(e){function t(t){var c;console.log("Trying to get words with session: "+t);var l=new XMLHttpRequest,a=e.getNumberOfWords();l.open("GET",r+i+a+"?session="+t,!1),l.onload=function(){var t=JSON.parse(this.responseText);for(c=0;a>c;c++)n.measureText(String(t[c].from)).width<=o-20&&(n.font=screen.TRANSLATION_FONT_SIZE+screen.FONT,n.measureText(String(t[c].to)).width<=o-20&&e.setWordPair(c,t[c].from,t[c].to,t[c].id))},l.send()}var n,o=360,r="https://zeeguu.unibe.ch/",i="bookmarks_to_study/";return{create:function(o){n=o,t(e.getCode())},printWords:function(){e.printWords()}}}),define("battery",[],function(){function e(e,t,n,o){var r=(o-90)*Math.PI/180;return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}function t(t,n,o,r,i){var c=e(t,n,o,i),l=e(t,n,o,r),a=180>=i-r?"0":"1",s=["M",c.x,c.y,"A",o,o,0,a,0,l.x,l.y].join(" ");return s}var n="green",o="red";return{draw:function(){var e=navigator.battery||navigator.webkitBattery||navigator.mozBattery;e.onchargingchange=function(){e.charging?console.log("battery is charging"):console.log("battery is not charging")},e.onlevelchange=function(){console.log(Math.floor(100*e.level)),document.getElementById("battery").setAttribute("d",t(180,180,180,270,270+180*e.level)),e.level>.15?document.getElementById("battery").setAttribute("stroke",n):document.getElementById("battery").setAttribute("stroke",o)}}}}),define("gui",["battery","userData","time"],function(e,t,n){function o(e){var t=e/4,n="rotate("+t+"deg)";document.getElementById("timeBackground").style.transform=n}function r(){g.clearRect(0,0,100,90),g.font="50px Arial",g.fillStyle=p,g.textAlign=E,g.fillText(n.getDay(),50,60)}function i(e,t,n,o){u.font=o+m,u.fillStyle=p,u.textAlign=E,u.fillText(e,t,n)}function c(){f.clearRect(0,0,I,h),f.font=v+m,f.fillStyle=p,f.textAlign=E,f.fillText(n.getHours()+":"+n.getMinutes(),I/2,b)}function l(e,t){var n=.1;e.style.display="block";var o=setInterval(function(){n>=.8&&clearInterval(o),e.style.opacity=n,e.style.filter="alpha(opacity="+100*n+")",n+=.1*n},t)}function a(e,t){var n=.8,o=setInterval(function(){.1>=n&&(clearInterval(o),e.style.visibility="hidden"),e.style.opacity=n,e.style.filter="alpha(opacity="+100*n+")",n-=.1*n},t)}function s(e){var t=document.getElementById("imageFade");t.style.visibility="visible",t.style.opacity=1;var n=t.getContext("2d"),o=new Image;o.onload=function(){n.drawImage(o,0,0)},o.src=e,setTimeout(function(){a(t,50)},500)}function d(e){console.log("word number: "+t.getWordNumber()+" | number of words: "+t.getNumberOfWords()),t.getWordNumber()===t.getNumberOfWords()&&t.setWordNumber(0),u.clearRect(0,0,I,B),e?(i(t.getWord(t.getWordNumber()),I/2,k,y),i(t.getTranslation(t.getWordNumber()),I/2,N,S)):i(t.getWord(t.getWordNumber()),I/2,k,y)}var u,g,f,m="px Arial",v=120,y=45,S=35,E="center",p="white",I=360,h=180,b=160,B=120,k=45,N=95,w=!1;return{draw:function(){n.create();var t=60*n.getHours()+n.getMinutes();c(),r(),o(t),e.draw()},create:function(e){u=e;var n=document.getElementById("digitalTime");f=n.getContext("2d");var o=document.getElementById("dateSpace");g=o.getContext("2d"),d(w),document.getElementById("nextButton").addEventListener("click",function(){console.log("next button clicked"),t.nextWord(),w=!1,d(w)}),document.getElementById("wordSpace").addEventListener("click",function(){console.log("word space clicked"),w=!w,w?t.addEvent("reveal"):t.addEvent("hide"),d(w)}),document.getElementById("menuButton").addEventListener("click",function(){var e=document.getElementById("menu");e.style.visibility="visible",console.log("menu clicked"),l(e,5)}),document.getElementById("menuSpace").addEventListener("click",function(){var e=document.getElementById("menu");a(e,5)}),document.getElementById("trashButton").addEventListener("click",function(){t.addEvent("trash"),t.deleteWordPair();var e="assets/trash_icon.png";console.log("trashbutton clicked"),s(e),w=!1,d(w)}),document.getElementById("learnedButton").addEventListener("click",function(){t.addEvent("learned");var e="assets/I_learned_it_icon.png";s(e),t.nextWord(),w=!1,d(w)}),document.getElementById("settingsButton").addEventListener("click",function(){var e=document.getElementById("settings");e.style.visibility="visible",l(e,5)}),document.getElementById("settingsSpace").addEventListener("click",function(){var e=document.getElementById("settings");a(e,5)}),document.getElementById("reverseButton").addEventListener("click",function(){t.addEvent("reverse"),w=!1,t.setReverseStatus(!t.getReverseStatus()),d(w)})}}}),define("device",["userData"],function(e){function t(){try{tizen.power.setScreenStateChangeListener(function(t,n){"SCREEN_NORMAL"===n&&"SCREEN_OFF"===t?(console.log("We just woke up"),e.addEvent("screenOn")):(console.log("The display has been switched off"),e.addEvent("screenOff"),e.save(),e.printEvents())})}catch(t){}}function n(){document.addEventListener("tizenhwkey",function(e){if("back"===e.keyName)try{tizen.application.getCurrentApplication().exit()}catch(t){}})}return{create:function(){n()},listen:function(){t()}}}),require(["login","session","gui","device"],function(e,t,n,o){function r(){n.draw(),o.listen(),setTimeout(r,1e3)}function i(){t.create(l),t.printWords(),n.create(l),o.create(),r()}var c=document.getElementById("wordSpace"),l=c.getContext("2d");new e(i)}),define("main",function(){});